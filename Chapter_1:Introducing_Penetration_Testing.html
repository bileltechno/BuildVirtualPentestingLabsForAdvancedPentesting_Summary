<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<title></title>
	<meta name="generator" content="LibreOffice 4.2.8.2 (Linux)">
	<meta name="created" content="20160821;0">
	<meta name="changed" content="20161015;124021096978144">
	<style type="text/css">
	<!--
		@page { margin: 0.79in }
		p { margin-bottom: 0.1in; line-height: 120% }
		a:link { so-language: zxx }
	-->
	</style>
</head>
<body lang="en-US" dir="ltr" style="background: transparent">
<p align="center" style="margin-bottom: 0in; line-height: 100%"><br>
</p>
<p align="center" style="margin-bottom: 0in; line-height: 100%"><br>
</p>
<p align="center" style="margin-bottom: 0in; line-height: 100%"><font size="7" style="font-size: 40pt"><b>Building
Virtual Pentesting </b></font>
</p>
<p align="center" style="margin-bottom: 0in; line-height: 100%"><font size="7" style="font-size: 40pt"><b>Labs
for Advanced Penetration </b></font>
</p>
<p align="center" style="margin-bottom: 0in; line-height: 100%"><font size="7" style="font-size: 40pt"><b>Testing</b></font></p>
<p style="margin-bottom: 0in; line-height: 100%; page-break-before: always">
<br>
</p>
<p style="margin-bottom: 0in; line-height: 100%"><br>
</p>
<p style="margin-bottom: 0in; line-height: 100%"><br>
</p>
<p style="margin-bottom: 0in; line-height: 100%"><font size="6" style="font-size: 25pt"><b>Chapter
1: Introducing Penetration Testing</b></font></p>
<p style="margin-bottom: 0in; line-height: 100%"><br>
</p>
<p style="margin-bottom: 0in; line-height: 100%"><font size="5" style="font-size: 20pt"><b>Security
testing</b></font></p>
<p style="margin-bottom: 0in; line-height: 100%"><br>
</p>
<p style="margin-bottom: 0in; font-weight: normal; line-height: 100%; text-decoration: none">
<font size="3" style="font-size: 12pt">&quot;Security testing is a
process to determine that an information system protects and
maintains functionality as intended.&quot; </font>
</p>
<p style="margin-bottom: 0in; font-weight: normal; line-height: 100%; text-decoration: none">
<font size="3" style="font-size: 12pt">Security is a process and not
a product. I would also like to add that it is a methodology and not
a product.</font></p>
<p style="margin-bottom: 0in; font-weight: normal; line-height: 100%; text-decoration: none">
<font size="3" style="font-size: 12pt">Another component to add to
our discussion is the point that security testing takes into account
the main areas of a security model; a sample of this is as follows: </font>
</p>
<p style="margin-bottom: 0in; line-height: 100%; text-decoration: none">
•<font size="3" style="font-size: 12pt"><b>Authentication
•Authorization •Confidentiality •Integrity •Availability
•Non-repudiation</b></font></p>
<p style="margin-bottom: 0in; line-height: 100%"><br>
</p>
<p style="margin-bottom: 0in; line-height: 100%; page-break-before: auto; page-break-after: auto">
<b><span style="text-decoration: none"><font size="3" style="font-size: 12pt">Authentication</font></span>
</b>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%; text-decoration: none">
<font size="3" style="font-size: 12pt">This could be something as
simple as users selecting a complex password or adding additional
factors to the authentication. No single factor of authentication is
considered to be secure in today's networks.</font></p>
<p style="margin-bottom: 0in; line-height: 100%; page-break-before: auto; page-break-after: auto">
<b><span style="text-decoration: none"><font size="3" style="font-size: 12pt">Authorization</font></span>
</b>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%; text-decoration: none">
<font size="3" style="font-size: 12pt">Authorization allows us to
have different types of users with separate privilege levels to
coexist within a system.</font></p>
<p style="margin-bottom: 0in; line-height: 100%; page-break-before: auto; page-break-after: auto">
<b><span style="text-decoration: none"><font size="3" style="font-size: 12pt">Confidentiality</font></span>
</b>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%; text-decoration: none">
<font size="3" style="font-size: 12pt">The concept of confidentiality
is the assurance that something we want to be protected on the
machine or network is safe and not at the risk of being compromised.</font></p>
<p style="margin-bottom: 0in; line-height: 100%; page-break-before: auto; page-break-after: auto">
<b><span style="text-decoration: none"><font size="3" style="font-size: 12pt">Integrity</font></span>
</b>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%; text-decoration: none">
<font size="3" style="font-size: 12pt">Here, we are concerned with
the compromise of the fact that data it is not modified in transit or
from its original form. A common way of doing this is to use a
hashing algorithm to validate that the file is unaltered.</font></p>
<p style="margin-bottom: 0in; line-height: 100%; page-break-before: auto; page-break-after: auto">
<b><span style="text-decoration: none"><font size="3" style="font-size: 12pt">Availability</font></span>
</b>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%; text-decoration: none">
<font size="3" style="font-size: 12pt">One of the most difficult
things to secure is the availability, that is, the right to have a
service when required.</font></p>
<p style="margin-bottom: 0in; line-height: 100%; page-break-before: auto; page-break-after: auto">
<b><span style="text-decoration: none"><font size="3" style="font-size: 12pt">Non-repudiation</font></span>
</b>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%; text-decoration: none">
<font size="3" style="font-size: 12pt">The non-repudiation statement
makes the claim that a sender cannot deny sending omething;
consequently, this is the one I usually have the most trouble with.</font></p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%"><br>
</p>
<p style="margin-bottom: 0in; line-height: 100%"><font size="5" style="font-size: 20pt"><b>Abstract
testing methodology </b></font>
</p>
<p style="margin-bottom: 0in; line-height: 100%"><br>
</p>
<p style="margin-bottom: 0in; line-height: 100%">We will define our
testing methodology, which consists of the following steps: 
</p>
<p style="margin-bottom: 0in; line-height: 100%">•<b>Planning
•Nonintrusive target search •Intrusive target search •Data
analysis •Reporting</b></p>
<p style="margin-bottom: 0in; line-height: 100%"><br>
</p>
<p style="margin-bottom: 0in; line-height: 100%"><b>Planning </b>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%; page-break-before: auto; page-break-after: auto">
This is a crucial step for professional testing, but it is rarely
given the time that is essentially required. 
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%">
There are two things that a tester should tell clients with respect
to this step, and that is there are two things that a professional
tester cannot do that an attacker can, and they are as follows: 
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%; text-decoration: none">
• <u><span style="font-weight: normal">Six to nine months of
planning </span></u>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%; text-decoration: none">
• <u><span style="font-weight: normal">Break the law </span></u>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%">
I could break the law I suppose and go to jail but it is not
something that I find appealing and as such am not going to do it.
Additionally, being a certified hacker and licensed penetration
tester so breaking the law while testing is a violation of this code
of ethics.</p>
<p style="margin-bottom: 0in; line-height: 100%"><br>
</p>
<p style="margin-bottom: 0in; line-height: 100%"><b>Nonintrusive
target search </b>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%; page-break-before: auto; page-break-after: auto">
It is a public information search, is a public resources to extract
information about the target.</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%">
There are a plethora of tools that are available for this. 
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%"><br>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-variant: normal; line-height: 100%; text-decoration: none">
• <span style="font-style: normal"><u><span style="font-weight: normal">NsLookup:
</span></u></span>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%">
It is a method of querying DNS servers to determine information about
a potential target.</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%">•
<u><span style="font-weight: normal">Serversniff: </span></u>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%">
The www.serversniff.net website has a number of tools that we can use
to gather information. There are tools for IP, Crypto, Nameserver,
Webserver, and so on.</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%">•
<u><span style="font-weight: normal">Way Back Machine
(www.archive.org): </span></u>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%">
This site is proof that anything that is ever on the Internet never
leaves! I like to use the site to download some of my favorite
presentations, tools, and so on that have been removed from a site
and in some cases, the site no longer exists. As an example, one of
the tools that is used to show a student the concept of <span style="text-decoration: none"><i>steganography
is the tool Infostego. </i></span>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%">•
<u><span style="font-weight: normal">Shodanh: </span></u>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%">
The Shodan site is one of the most powerful cloud scanners we can
use. You are required to register with the site to be able to perform
the more advanced types of queries.</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%">
For now, we will look at one example and move on as <i>we could write
an entire book just on this tool.</i></p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%"><br>
</p>
<p style="margin-bottom: 0in; line-height: 100%; page-break-before: auto; page-break-after: auto">
<b>Intrusive target search </b>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%">
Intrusive target search is the step that starts the true hacker type
activity. This is when you probe and explore the target network;
consequently, ensure that you have the explicitly written permission
to carry out this activity with you. <i>Without it, you are
considered a criminal.</i></p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%">
Within this step, there are a number of components that further
define the methodology, which are shown as follows: 
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%">•
<u><span style="font-weight: normal">Find live systems:</span></u></p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%; text-decoration: none">
No matter how good our skills are, we need to find systems that we
can 
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%; text-decoration: none">
attack. One of the most popular tools to do this is the excellent
open 
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%; text-decoration: none">
source tool nmap. <font color="#c5000b">nmap –sP &lt;insert network
IP address&gt;.</font></p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%; text-decoration: none">
<font color="#000000">•</font><font color="#000000"><u> </u></font><font color="#000000"><u><span style="font-weight: normal">Discover
open ports: </span></u></font>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%; text-decoration: none">
<font color="#000000">We next want to see what is open on these
machines. A good analogy to a port is a door, that is, if the door is
open, then I can approach the open door. If it is open, then I know
it is possible to get access, and if it is closed, then I know I
cannot go through that door.</font></p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%; text-decoration: none">
<font color="#000000">We have machines that we have identified, so we
do not have to scan the entire network as we did previously. We will
only scan the machines that are currently in use.</font></p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%; text-decoration: none">
<font color="#000000">Additionally, one of those machines that is
found is our own machine; therefore, we will not scan ourselves. We
can scan these by entering <font color="#c5000b">nmap –sS
192.168.177.1,2,254</font>.</font></p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%; text-decoration: none">
<font color="#000000">• <u><span style="font-weight: normal">Discover
services: </span></u></font>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%; text-decoration: none">
<font color="#000000">We now have live systems and openings that are
on the machine. The next step is to determine what is running on
these ports we have discovered. For our network, we will enter <font color="#c5000b"><span style="background: #ffffff">nmap
–sV 192.168.177.1</span></font> .</font></p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%; text-decoration: none">
<font color="#000000">• <u><span style="font-weight: normal">Enumeration:
</span></u></font>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%; text-decoration: none">
<font color="#000000">This is the process of extracting more
information about the potential target to include the OS, usernames,
machine names, and other details that we can discover. To process the
enumeration with nmap, we use the –A option. Enter <font color="#c5000b">nmap
–A 192.168.177.1</font> .</font></p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%; text-decoration: none">
<font color="#000000">• <u><span style="font-weight: normal">Identify
vulnerabilities:</span></u><span style="font-weight: normal"> </span></font>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%"><font color="#000000"><span style="text-decoration: none"><span style="font-weight: normal">After
we have processed the steps to this point, we have information about
the services and versions of the software that are running on the
machine. We could take each version and search vulnerabilities. We
will be using </span></span></font><font color="#000000"><span style="text-decoration: none"><i><span style="font-weight: normal">Nexpose
vulnerability scanner from Rapid7.</span></i></span></font><font color="#000000"><span style="text-decoration: none"><span style="font-weight: normal">
You access it by entering <a href="https://localhost:3780/">https://localhost:3780</a>.</span></span></font></p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%; text-decoration: none">
<font color="#000000">• <u><span style="font-weight: normal">Exploitation:
</span></u></font>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%; text-decoration: none">
<font color="#000000">It is the process of validating a discovered
vulnerability. The point is that you are executing a piece of code on
a client's machine and this code could cause damage. The most popular
free tool for exploitation is <i>metasploit</i>, now owned by Rapid7.
There are entire books written on this tool.</font></p>
<p style="margin-bottom: 0in; line-height: 100%"><br>
</p>
<p style="margin-bottom: 0in; line-height: 100%"><b>Data analysis</b></p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%; text-decoration: none">
<font color="#000000">This is the process that takes the most time to
develop. The real challenge is taking all of the results and
analyzing them.Take a moment and review the protocol analysis capture
from the Wireskark tool. As an analyst, you need to know what the
protocol analyzer is showing you. Do you know what exactly is
happening?</font></p>
<p style="margin-bottom: 0in; line-height: 100%"><br>
</p>
<p style="margin-bottom: 0in; line-height: 100%"><b>Reporting</b></p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%; text-decoration: none">
<font color="#000000">This is unfortunate as it is one of the most
important things you need to master. You have </font>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; font-weight: normal; line-height: 100%; text-decoration: none">
<font color="#000000">to be able to present a report of your findings
to the client. There are two components we use when it comes to
findings; the first is we provide a summary of findings in a table
format so that the client can reference the findings early on in the
report. The second is the detailed findings section. This is where we
put all of the information about the finding. We rate it according to
the severity, and we include the following data: </font>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%; text-decoration: none">
<font color="#000000">• <i><u><span style="font-weight: normal">Description</span></u></i><span style="font-weight: normal">:
This is where we provide the description of the vulnerability,
specifically what it is and what is affected. </span></font>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%; text-decoration: none">
<font color="#000000">• <u><span style="font-weight: normal">Analysis/Exposure</span></u><span style="font-weight: normal">:
For this section, you want to show the client that you have done your
research and not just repeating what the scanning tool told you. It
is very important that you research a number of resources and write a
good analysis of what the vulnerability is and an explanation of the
exposure it poses to the client's site. </span></font>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%; text-decoration: none">
<font color="#000000">• <i><u><span style="font-weight: normal">Recommendations</span></u></i><span style="font-weight: normal">:
We want to provide the client a reference to the patch that will help
to mitigate the risk of this vulnerability. We never tell the client
not to use it. We do not know what their policy is, and it might be
something they have to have, to support their business. In these
situations, it is our job as consultants to recommend and help the
client determine the best way to either mitigate the risk or remove
it. When a patch is not available, we provide a reference to
potential workarounds until the patch is available. </span></font>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%; text-decoration: none">
<font color="#000000">• <i><u><span style="font-weight: normal">References</span></u></i><span style="font-weight: normal">:
If there are references such as a Microsoft bulletin number, CVE
number, and so on, then this is where we would place it.</span></font></p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%; text-decoration: none">
<br>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%; text-decoration: none">
<br>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%; text-decoration: none">
<br>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%; text-decoration: none">
<br>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%; text-decoration: none">
<br>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%; text-decoration: none">
<br>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%; text-decoration: none">
<br>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%; text-decoration: none">
<br>
</p>
<p style="margin-left: 0.5in; margin-bottom: 0in; line-height: 100%; text-decoration: none">
<br>
</p>
</body>
</html>